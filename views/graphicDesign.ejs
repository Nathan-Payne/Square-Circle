<% include ./partials/header %>

<% if(currentUser){ %>
    <form action="/graphic-design" method="POST">
        <label class="gridForm">Moving the Projects
            <select name="gridMove" id="">
                <option value="gridDown">Down the page</option>
                <option value="gridUp">Up the page</option>
            </select>
        </label>
        <label class="gridForm">
            <input type="submit" value="MOVE">
        </label>
    </form>
<% } %>

<div class="content">
    <!-- Left Navbar -->
    <nav id="leftnav">
        <div id="leftlinks">
            <a href="about">Contact</a>
            <a href="concept">Concept</a>
        </div>
    </nav>
    
    <section class="container">
        <% projects.forEach(function(project, index){ %>
            <article class="thumbnail fadeAnimation">
                <a href="/project/<%= project._id %>">
                    <img src="<%= cloudinary.url(`square_circle/${project.title}_image0.jpg`, {quality: 28, crop: `fit`}) %>" alt="<%= project.title %> image">
                    <h4><span><%= project.title %></span></h4> 
                    <h6><%= project.shortDesc %></h6>
                </a>
                <% if(currentUser){ %>
                    <h6>Current position: <%= project.xPosition %>, <%= project.yPosition %></h6>
                    <a href="/project/<%= project._id %>/edit">
                        <button>EDIT PROJECT</button>
                    </a>
                <% } %>
            </article>
        <% }); %>
    </section>
</div>

<!-- required for .ejs variable (projects) to be passed to .js script file (disable-grid.js) -->
<script type="text/javascript">
    let thumbProjects = <%-JSON.stringify(projects, ['_id', 'title', 'shortDesc', 'xPosition', 'yPosition'])%>;
</script>
<script type="text/javascript" src="/scripts/disable-grid.js"></script>
<script type="text/javascript" src="/scripts/activePage.js"></script>

<% include ./partials/footer %>